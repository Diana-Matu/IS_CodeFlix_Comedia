---
// src/components/CardMovie.astro
interface Movie {
  id: number;
  title?: string;
  name?: string;
  poster_path?: string | null;
  vote_average?: number;
  release_date?: string;
  first_air_date?: string;
  overview?: string;
}

const { movie } = Astro.props as { movie: Movie };
const title = movie.title ?? movie.name ?? "Untitled";
const date = movie.release_date ?? movie.first_air_date ?? "";
---


<a href={`/movies/${movie.id}`} class="card">
  <div class="card-img">
    <img
      src={movie.poster_path ? `https://image.tmdb.org/t/p/w500${movie.poster_path}` : "https://via.placeholder.com/500x750?text=No+Image"}
      alt={title}
      loading="lazy"
    />
  </div>

  <header class="card-info">
    <h2 class="title">{title}</h2>
    <p class="rating">⭐ {movie.vote_average ?? "—"} • {date}</p>
    {movie.overview && <p class="overview">{movie.overview}</p>}
  </header>
</a>

<style>
.card {
  display: flex;
  flex-direction: column;
  background-color: #000;
  color: #fff;
  border-radius: 12px;
  overflow: hidden;
  text-decoration: none;
  transition: transform .25s, box-shadow .25s;
}
.card:hover { transform: scale(1.06); box-shadow: 0 0 15px 6px #ffea00; }
.card-img img { width: 100%; height: 340px; object-fit: cover; display: block; }
.card-info { padding: 0.8rem; text-align: center; }
.title { color: #ffea00; font-size: 1.05rem; font-weight: 700; margin: 0.25rem 0; }
.rating { color: #ddd; margin: 0.25rem 0; }
.overview { color: #aaa; font-size: .85rem; line-height: 1.2; max-height: 3.6em; overflow: hidden; text-overflow: ellipsis; }
</style>
